<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Home - AK Cell</title>
   <link rel="stylesheet" href="/css/bootstrap.css">
  <link rel="stylesheet" href="/css/custom.css">
<link rel="stylesheet" href="/css/bootstrap-icons/font/bootstrap-icons.css">

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css">

  <style>
    .hero-slide img {
      width: 100%;
      height: 230px;
      object-fit: cover;
      border-radius: 20px;
      transition: transform 0.5s ease;
    }
    @media (min-width: 768px) {
      .hero-slide img {
        height: 280px;
      }
    }
    .swiper {
      padding-bottom: 40px;
    }
  </style>
</head>

<body>
<%- include('partials/header') %>

<!-- Swiper Slider (Mobile only) -->
<div class="container mt-3 d-block d-md-none">
  <div class="swiper mySwiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide hero-slide">
        <img src="/images/webp/slider-gamesx.webp" alt="Slide 1"  loading="lazy">
      </div>
      <div class="swiper-slide hero-slide">
        <img src="/images/webp/slider-moviex.webp" alt="Slide 2"  loading="lazy">
      </div>
      <div class="swiper-slide hero-slide">
        <img src="/images/webp/slider-rechargex.webp" alt="Slide 3" loading="lazy">
      </div>
    </div>
    <div class="swiper-pagination"></div>
  </div>
</div>

<!-- Banner (Desktop only) -->
<div class="container mt-3 d-none d-md-block">
  <img src="/images/webp/bannerak.webp" alt="Banner" class="img-fluid rounded" style="width:100%; height:280px; object-fit:cover;">
</div>

<!-- Search Bar -->
<div class="container my-3">
   <div class="search-bar-container">
        <form id="searchForm" action="#" method="GET" role="search">
            <input type="search" id="searchInput" class="search-input" placeholder="Search for any service...">
            <button type="submit" class="search-btn">
                <i class="bi bi-search"></i>
            </button>
        </form>
    </div>
</div>

<!-- Results container (جديد) -->
<div class="container my-3" id="searchResults" style="display:none;">
  <h2 class="text-center section-title mb-3">Results</h2>
  <div id="resultsGrid" class="row row-cols-2 row-cols-md-4 g-3"></div>
  <div id="noResults" class="alert alert-warning text-center" style="display:none;">
    No results found.
  </div>
</div>

<!-- Services Section -->
<div id="quick-services" class="container my-3">
  <h2 class="text-center section-title mb-3">Our Services</h2>
  <div class="row row-cols-2 row-cols-md-4 g-3">
    <div class="col">
      <a href="/accounts" class="category-card service-card">
        <img src="/images/webp/Accountslogo.webp" class="card-img" alt="Accounts"  loading="lazy">
        <div class="card-body text-center">Accounts</div>
      </a>
    </div>
    <div class="col">
      <a href="/games" class="category-card service-card">
        <img src="/images/webp/Gameslogo.webp" class="card-img" alt="Games"  loading="lazy">
        <div class="card-body text-center">Games</div>
      </a>
    </div>
    <div class="col">
      <a href="/communication" class="category-card service-card">
        <img src="/images/webp/communicationlogo.webp" class="card-img" alt="Communication"  loading="lazy">
        <div class="card-body text-center">Communication</div>
      </a>
    </div>
    <div class="col">
      <a href="/apps-section" class="category-card service-card">
        <img src="/images/webp/apps-section.webp" class="card-img" alt="Apps"  loading="lazy">
        <div class="card-body text-center">Apps</div>
      </a>
    </div>
  </div>
</div>

<!-- Why Choose Us -->
<div class="container my-4">
  <h2 class="text-center section-title mb-3">Why Choose Us?</h2>
  <div class="row text-center">
    <div class="col-md-4">
      <i class="bi bi-lightning-charge-fill feature-icon mb-2"></i>
      <h4>Fast Delivery</h4>
      <p class="text-muted">Your services are delivered instantly.</p>
    </div>
    <div class="col-md-4">
      <i class="bi bi-shield-lock-fill feature-icon mb-2"></i>
      <h4>Secure Payments</h4>
      <p class="text-muted">We offer safe and secure payment methods.</p>
    </div>
    <div class="col-md-4">
      <i class="bi bi-headset feature-icon mb-2"></i>
      <h4>24/7 Support</h4>
      <p class="text-muted">Our team is here to help you anytime.</p>
    </div>
  </div>
</div>

<!-- Telegram Notice -->
<% if (showTelegramToast) { %>
<div id="telegram-toast" class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 9999;">
  <div class="toast show align-items-center text-white bg-primary border-0 shadow" role="alert">
    <div class="d-flex align-items-center">
      <div class="toast-body">
        📢 <strong>فعل التنبيهات عبر تيليغرام</strong><br>
        لتصلك حالة طلبك  مباشرة على تليفونك!
        <br>
        👉 <a href="https://t.me/AKorder_notifier_bot" target="_blank" class="text-warning fw-bold text-decoration-underline">
          افتح البوت واضغط /start
        </a>
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>
<% } %>

 <%- include('partials/footer') %>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const swiper = new Swiper(".mySwiper", {
      loop: true,
      autoplay: {
        delay: 3000,
        disableOnInteraction: false,
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
    });
  });
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("searchForm");
  const input = document.getElementById("searchInput");
  const cats = document.getElementById("categoriesSection");
  const box  = document.getElementById("searchResults");
  const grid = document.getElementById("resultsGrid");
  const noRes= document.getElementById("noResults");

  const toCard = (r) => {
    const price = (r.price != null) ? `$${Number(r.price).toFixed(2)}` : 'Variable';
    const badge = r.source === 'api' ? 'info' : 'secondary';
    return `
      <div class="col">
        <a href="${r.href}" class="card h-100 text-decoration-none">
          <img src="${r.image || '/images/default-product.png'}" class="card-img-top" style="height:160px;object-fit:cover;">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start">
              <h6 class="card-title mb-1">${r.title || ''}</h6>
              <span class="badge text-bg-${badge}">${r.source.toUpperCase()}</span>
            </div>
            ${r.category ? `<div class="text-muted small">${r.category}</div>`:''}
            ${r.subcategory ? `<div class="text-muted small">${r.subcategory}</div>`:''}
            <div class="mt-2 fw-bold">${price}</div>
          </div>
        </a>
      </div>`;
  };

  async function runSearch(q) {
    if (!q || q.trim().length < 2) {
      // رجّع الكاتيجوريز إذا البحث فاضي أو قصير
      box.style.display = 'none';
      cats.style.display = '';
      return;
    }
    try {
      const res = await fetch(`/search/json?q=${encodeURIComponent(q.trim())}`);
      const data = await res.json();
      grid.innerHTML = '';
      if (!Array.isArray(data) || data.length === 0) {
        noRes.style.display = '';
      } else {
        noRes.style.display = 'none';
        grid.innerHTML = data.map(toCard).join('');
      }
      cats.style.display = 'none';
      box.style.display  = '';
    } catch (e) {
      console.error('Search error:', e);
      noRes.style.display = '';
      cats.style.display = 'none';
      box.style.display  = '';
    }
  }

  // منع سَبمت الإفتراضي وتحويله لبحث داخل الصفحة
  form.addEventListener("submit", (e) => {
    e.preventDefault();
    runSearch(input.value);
  });

  // بحث فوري مع ديباونس بسيط
  let t;
  input.addEventListener("input", () => {
    clearTimeout(t);
    t = setTimeout(() => runSearch(input.value), 250);
  });
});
</script>

<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toastEl = document.querySelector('#telegram-toast .toast');
    if (toastEl) {
      const toast = new bootstrap.Toast(toastEl, {
        delay: 8000,
        autohide: true
      });
      toast.show();
    }
  });
</script>
  <script src="/main.js"></script>
</body>
</html>