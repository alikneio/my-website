<footer class="bg-dark text-white pt-5 pb-4">
  <div class="container text-center text-md-start">
    <div class="row">

      <!-- Logo & About -->
      <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
        <h5 class="text-uppercase fw-bold text-info">AK Cell</h5>
        <hr class="mb-4 mt-0 d-inline-block mx-auto" style="width: 60px; background-color: #0dcaf0; height: 2px" />
        <p class="small text-light">
          Your one-stop shop for all social media, gaming, and digital services.
        </p>
      </div>

      <!-- Navigation Links -->
      <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4">
        <h6 class="text-uppercase fw-bold text-info">Links</h6>
        <hr class="mb-4 mt-0 d-inline-block mx-auto" style="width: 60px; background-color: #0dcaf0; height: 2px" />
        <ul class="list-unstyled">
          <li><a href="/" class="text-decoration-none text-light d-block py-1">Home</a></li>
          <li><a href="/accounts" class="text-decoration-none text-light d-block py-1">Accounts</a></li>
          <li><a href="/games" class="text-decoration-none text-light d-block py-1">Games</a></li>
          <li><a href="/my-orders" class="text-decoration-none text-light d-block py-1">My Orders</a></li>
        </ul>
      </div>

      <!-- Contact -->
      <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4">
        <h6 class="text-uppercase fw-bold text-info">Contact</h6>
        <hr class="mb-4 mt-0 d-inline-block mx-auto" style="width: 60px; background-color: #0dcaf0; height: 2px" />
        <p class="small mb-2"><i class="bi bi-geo-alt-fill me-2 text-info"></i>Lebanon</p>
        <p class="small mb-0"><i class="bi bi-envelope-fill me-2 text-info"></i>contact@akcell.com</p>
      </div>

      <!-- Social Icons -->
      <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
        <h6 class="text-uppercase fw-bold text-info">Follow Us</h6>
        <hr class="mb-4 mt-0 d-inline-block mx-auto" style="width: 60px; background-color: #0dcaf0; height: 2px" />
        <div class="d-flex justify-content-center justify-content-md-start">
          <a href="#" class="btn btn-outline-light btn-sm me-2 rounded-circle"><i class="bi bi-facebook"></i></a>
          <a href="#" class="btn btn-outline-light btn-sm me-2 rounded-circle"><i class="bi bi-instagram"></i></a>
          <a href="#" class="btn btn-outline-light btn-sm me-2 rounded-circle"><i class="bi bi-whatsapp"></i></a>
        </div>
      </div>

    </div>
  </div>

  <!-- Copyright -->
  <div class="text-center mt-4 p-3 bg-black bg-opacity-25">
    Â© 2025 <span class="text-info">AK Cell</span>. All Rights Reserved.
  </div>
</footer>

<!-- ===== OOS overlay script (runs on all pages that include this footer) ===== -->
<script>
(function () {
  async function applyOutOfStockOverlay() {
    try {
      const resp = await fetch('/api/out-of-stock', { credentials: 'same-origin' });
      const ids = await resp.json();
      if (!Array.isArray(ids) || ids.length === 0) return;
      const idSet = new Set(ids.map(String));

      const anchors = document.querySelectorAll('a[href*="/checkout/"], a[href*="/api-checkout/"]');
      anchors.forEach(function (a) {
        const m = (a.getAttribute('href')||'').match(/\/(?:api-)?checkout\/(\d+)/);
        if (!m) return;
        const id = m[1];
        if (!idSet.has(id)) return;

        a.classList.add('disabled-link');
        a.setAttribute('aria-disabled','true');
        a.setAttribute('tabIndex','-1');

        var card = a.querySelector('.product-card, .card') || a.closest('.product-card, .card') || a;
        if (card && !card.querySelector('.out-of-stock-overlay')) {
          card.classList.add('position-relative');
          var ov = document.createElement('div');
          ov.className = 'out-of-stock-overlay';
          ov.textContent = 'OUT OF STOCK';
          card.appendChild(ov);
        }

        var btn = a.querySelector('button[type="submit"]');
        if (btn) btn.disabled = true;
      });

      document.querySelectorAll('form').forEach(function (form) {
        var el = form.querySelector('input[name="product_id"], input[name="productId"]');
        var pid = el && el.value;
        if (pid && idSet.has(String(pid))) {
          var btn = form.querySelector('button[type="submit"]');
          if (btn) btn.disabled = true;
          form.style.opacity = '.65';
        }
      });
    } catch (e) {
      console.warn('OOS overlay error:', e);
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', applyOutOfStockOverlay);
  } else {
    applyOutOfStockOverlay();
  }
})();
</script>

<style>
.out-of-stock-overlay{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  background:rgba(255,0,0,.18);
  color:#7a1a1a; font-weight:800; letter-spacing:.5px;
  border-radius:1rem; backdrop-filter: blur(1px);
  text-shadow:0 1px 1px rgba(255,255,255,.6);
}
.disabled-link { pointer-events:none; cursor:not-allowed; }
</style>

